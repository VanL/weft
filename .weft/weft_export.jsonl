{"type": "meta", "last_ts": 1761501273966444544, "magic": "simplebroker-v1", "schema_version": 4, "alias_version": 1761594146153981000}
{"type": "alias", "alias": "foo", "target": "bar"}
{"type": "alias", "alias": "test-alias", "target": "test-target"}
{"type": "message", "queue": "T1761447309922598912.inbox", "timestamp": 1761485118216548352, "body": "{\"close\": true}"}
{"type": "message", "queue": "T1761499936581558272.ctrl_out", "timestamp": 1761500663802777600, "body": "{\"type\": \"stream\", \"stream\": \"stderr\", \"chunk\": 0, \"final\": true, \"encoding\": \"text\", \"data\": \"\"}"}
{"type": "message", "queue": "T1761499936581558272.outbox", "timestamp": 1761500663799611392, "body": "{\"type\": \"stream\", \"stream\": \"stdout\", \"chunk\": 0, \"final\": true, \"encoding\": \"text\", \"data\": \"\"}"}
{"type": "message", "queue": "T1761500663592058880.ctrl_out", "timestamp": 1761500673880264704, "body": "{\"type\": \"stream\", \"stream\": \"stderr\", \"chunk\": 0, \"final\": true, \"encoding\": \"text\", \"data\": \"\"}"}
{"type": "message", "queue": "T1761500663592058880.outbox", "timestamp": 1761500673878675456, "body": "{\"type\": \"stream\", \"stream\": \"stdout\", \"chunk\": 0, \"final\": true, \"encoding\": \"text\", \"data\": \"\"}"}
{"type": "message", "queue": "weft.issues.high", "timestamp": 1761170616253890560, "body": "`weft status --json` returns a nested object missing the top-level fields promised in docs/tests (total_messages, last_timestamp, db_size). Real users get a payload shaped as {'broker': {...},\n   'managers': [...]}, so consumers break. Please flatten the JSON in weft/commands/status.py:83 to match the CLI spec and existing tests."}
{"type": "message", "queue": "weft.issues.high", "timestamp": 1761170624951193600, "body": "TaskRunner's resource enforcement watches the forked worker PID, not the actual command subprocess. For command targets we spawn via subprocess.run, so the monitor never sees the real RSS/FD usage and\n   memory limits never trip (see failing test_task_runner_reports_multiple_violations). Adjust weft/core/tasks/runner.py to monitor the child command PID (or propagate it) so multiple violations are reported."}
{"type": "message", "queue": "weft.issues.suggestions", "timestamp": 1761170631788834816, "body": "Consider populating README.md with a quickstart (install, init, run examples) and a short architecture diagram summaryâ€”spec docs are rich but the entry point is empty right now, which hurts\n   developer onboarding."}
{"type": "message", "queue": "weft.tasks.log", "timestamp": 1761500636793319424, "body": "{\"event\": \"task_initialized\", \"tid\": \"1761500636606930944\", \"tid_short\": \"6606930944\", \"status\": \"created\", \"timestamp\": 1761500636792792000, \"taskspec\": {\"tid\": \"1761500636606930944\", \"version\": \"1.0\", \"name\": \"manager\", \"description\": null, \"spec\": {\"type\": \"function\", \"function_target\": \"weft.core.manager:Manager\", \"process_target\": null, \"args\": [], \"keyword_args\": {}, \"timeout\": null, \"limits\": {\"memory_mb\": 1024, \"cpu_percent\": null, \"max_fds\": null, \"max_connections\": null}, \"env\": {}, \"working_dir\": null, \"interactive\": false, \"stream_output\": false, \"cleanup_on_exit\": true, \"polling_interval\": 1.0, \"reporting_interval\": \"transition\", \"monitor_class\": \"weft.core.resource_monitor.ResourceMonitor\", \"enable_process_title\": true, \"output_size_limit_mb\": 10, \"weft_context\": \"/Users/van/Developer/weft\", \"reserved_policy_on_stop\": \"keep\", \"reserved_policy_on_error\": \"keep\"}, \"io\": {\"inputs\": {\"inbox\": \"weft.spawn.requests\"}, \"outputs\": {\"outbox\": \"weft.manager.outbox\"}, \"control\": {\"ctrl_in\": \"weft.manager.ctrl_in\", \"ctrl_out\": \"weft.manager.ctrl_out\"}}, \"state\": {\"status\": \"created\", \"return_code\": null, \"started_at\": null, \"completed_at\": null, \"pid\": null, \"error\": null, \"time\": null, \"memory\": null, \"cpu\": null, \"fds\": null, \"net_connections\": null, \"max_memory\": null, \"max_cpu\": null, \"max_fds\": null, \"max_net_connections\": null}, \"metadata\": {\"role\": \"manager\", \"capabilities\": [], \"idle_timeout\": 600.0}}}"}
{"type": "message", "queue": "weft.tasks.log", "timestamp": 1761500636918157312, "body": "{\"event\": \"task_spawned\", \"tid\": \"1761500636606930944\", \"tid_short\": \"6606930944\", \"status\": \"created\", \"timestamp\": 1761500636917824000, \"taskspec\": {\"tid\": \"1761500636606930944\", \"version\": \"1.0\", \"name\": \"manager\", \"description\": null, \"spec\": {\"type\": \"function\", \"function_target\": \"weft.core.manager:Manager\", \"process_target\": null, \"args\": [], \"keyword_args\": {}, \"timeout\": null, \"limits\": {\"memory_mb\": 1024, \"cpu_percent\": null, \"max_fds\": null, \"max_connections\": null}, \"env\": {}, \"working_dir\": null, \"interactive\": false, \"stream_output\": false, \"cleanup_on_exit\": true, \"polling_interval\": 1.0, \"reporting_interval\": \"transition\", \"monitor_class\": \"weft.core.resource_monitor.ResourceMonitor\", \"enable_process_title\": true, \"output_size_limit_mb\": 10, \"weft_context\": \"/Users/van/Developer/weft\", \"reserved_policy_on_stop\": \"keep\", \"reserved_policy_on_error\": \"keep\"}, \"io\": {\"inputs\": {\"inbox\": \"weft.spawn.requests\"}, \"outputs\": {\"outbox\": \"weft.manager.outbox\"}, \"control\": {\"ctrl_in\": \"weft.manager.ctrl_in\", \"ctrl_out\": \"weft.manager.ctrl_out\"}}, \"state\": {\"status\": \"created\", \"return_code\": null, \"started_at\": null, \"completed_at\": null, \"pid\": null, \"error\": null, \"time\": null, \"memory\": null, \"cpu\": null, \"fds\": null, \"net_connections\": null, \"max_memory\": null, \"max_cpu\": null, \"max_fds\": null, \"max_net_connections\": null}, \"metadata\": {\"role\": \"manager\", \"capabilities\": [], \"idle_timeout\": 600.0}}, \"child_tid\": \"1761500636586467328\", \"child_taskspec\": {\"tid\": \"1761500636586467328\", \"version\": \"1.0\", \"name\": \"ls\", \"description\": null, \"spec\": {\"type\": \"command\", \"function_target\": null, \"process_target\": [\"ls\"], \"args\": [], \"keyword_args\": {}, \"timeout\": null, \"limits\": {\"memory_mb\": 1024, \"cpu_percent\": null, \"max_fds\": null, \"max_connections\": null}, \"env\": {}, \"working_dir\": null, \"interactive\": false, \"stream_output\": false, \"cleanup_on_exit\": true, \"polling_interval\": 1.0, \"reporting_interval\": \"transition\", \"monitor_class\": \"weft.core.resource_monitor.ResourceMonitor\", \"enable_process_title\": true, \"output_size_limit_mb\": 10, \"weft_context\": \"/Users/van/Developer/weft\", \"reserved_policy_on_stop\": \"keep\", \"reserved_policy_on_error\": \"keep\"}, \"io\": {\"inputs\": {\"inbox\": \"T1761500636586467328.inbox\"}, \"outputs\": {\"outbox\": \"T1761500636586467328.outbox\"}, \"control\": {\"ctrl_in\": \"T1761500636586467328.ctrl_in\", \"ctrl_out\": \"T1761500636586467328.ctrl_out\"}}, \"state\": {\"status\": \"created\", \"return_code\": null, \"started_at\": null, \"completed_at\": null, \"pid\": null, \"error\": null, \"time\": null, \"memory\": null, \"cpu\": null, \"fds\": null, \"net_connections\": null, \"max_memory\": null, \"max_cpu\": null, \"max_fds\": null, \"max_net_connections\": null}, \"metadata\": {\"source\": \"weft.cli\", \"parent_tid\": \"1761500636606930944\"}}}"}
{"type": "message", "queue": "weft.tasks.log", "timestamp": 1761500637110669312, "body": "{\"event\": \"task_initialized\", \"tid\": \"1761500636586467328\", \"tid_short\": \"6586467328\", \"status\": \"created\", \"timestamp\": 1761500637110147000, \"taskspec\": {\"tid\": \"1761500636586467328\", \"version\": \"1.0\", \"name\": \"ls\", \"description\": null, \"spec\": {\"type\": \"command\", \"function_target\": null, \"process_target\": [\"ls\"], \"args\": [], \"keyword_args\": {}, \"timeout\": null, \"limits\": {\"memory_mb\": 1024, \"cpu_percent\": null, \"max_fds\": null, \"max_connections\": null}, \"env\": {}, \"working_dir\": null, \"interactive\": false, \"stream_output\": false, \"cleanup_on_exit\": true, \"polling_interval\": 1.0, \"reporting_interval\": \"transition\", \"monitor_class\": \"weft.core.resource_monitor.ResourceMonitor\", \"enable_process_title\": true, \"output_size_limit_mb\": 10, \"weft_context\": \"/Users/van/Developer/weft\", \"reserved_policy_on_stop\": \"keep\", \"reserved_policy_on_error\": \"keep\"}, \"io\": {\"inputs\": {\"inbox\": \"T1761500636586467328.inbox\"}, \"outputs\": {\"outbox\": \"T1761500636586467328.outbox\"}, \"control\": {\"ctrl_in\": \"T1761500636586467328.ctrl_in\", \"ctrl_out\": \"T1761500636586467328.ctrl_out\"}}, \"state\": {\"status\": \"created\", \"return_code\": null, \"started_at\": null, \"completed_at\": null, \"pid\": null, \"error\": null, \"time\": null, \"memory\": null, \"cpu\": null, \"fds\": null, \"net_connections\": null, \"max_memory\": null, \"max_cpu\": null, \"max_fds\": null, \"max_net_connections\": null}, \"metadata\": {\"source\": \"weft.cli\", \"parent_tid\": \"1761500636606930944\"}}}"}
{"type": "message", "queue": "weft.tasks.log", "timestamp": 1761500637113831424, "body": "{\"event\": \"work_started\", \"tid\": \"1761500636586467328\", \"tid_short\": \"6586467328\", \"status\": \"running\", \"timestamp\": 1761500637113801000, \"taskspec\": {\"tid\": \"1761500636586467328\", \"version\": \"1.0\", \"name\": \"ls\", \"description\": null, \"spec\": {\"type\": \"command\", \"function_target\": null, \"process_target\": [\"ls\"], \"args\": [], \"keyword_args\": {}, \"timeout\": null, \"limits\": {\"memory_mb\": 1024, \"cpu_percent\": null, \"max_fds\": null, \"max_connections\": null}, \"env\": {}, \"working_dir\": null, \"interactive\": false, \"stream_output\": false, \"cleanup_on_exit\": true, \"polling_interval\": 1.0, \"reporting_interval\": \"transition\", \"monitor_class\": \"weft.core.resource_monitor.ResourceMonitor\", \"enable_process_title\": true, \"output_size_limit_mb\": 10, \"weft_context\": \"/Users/van/Developer/weft\", \"reserved_policy_on_stop\": \"keep\", \"reserved_policy_on_error\": \"keep\"}, \"io\": {\"inputs\": {\"inbox\": \"T1761500636586467328.inbox\"}, \"outputs\": {\"outbox\": \"T1761500636586467328.outbox\"}, \"control\": {\"ctrl_in\": \"T1761500636586467328.ctrl_in\", \"ctrl_out\": \"T1761500636586467328.ctrl_out\"}}, \"state\": {\"status\": \"running\", \"return_code\": null, \"started_at\": 1761500637113389000, \"completed_at\": null, \"pid\": 80632, \"error\": null, \"time\": null, \"memory\": null, \"cpu\": null, \"fds\": null, \"net_connections\": null, \"max_memory\": null, \"max_cpu\": null, \"max_fds\": null, \"max_net_connections\": null}, \"metadata\": {\"source\": \"weft.cli\", \"parent_tid\": \"1761500636606930944\"}}, \"message_id\": 1761500636900245504}"}
{"type": "message", "queue": "weft.tasks.log", "timestamp": 1761500637281947648, "body": "{\"event\": \"work_completed\", \"tid\": \"1761500636586467328\", \"tid_short\": \"6586467328\", \"status\": \"completed\", \"timestamp\": 1761500637281888000, \"taskspec\": {\"tid\": \"1761500636586467328\", \"version\": \"1.0\", \"name\": \"ls\", \"description\": null, \"spec\": {\"type\": \"command\", \"function_target\": null, \"process_target\": [\"ls\"], \"args\": [], \"keyword_args\": {}, \"timeout\": null, \"limits\": {\"memory_mb\": 1024, \"cpu_percent\": null, \"max_fds\": null, \"max_connections\": null}, \"env\": {}, \"working_dir\": null, \"interactive\": false, \"stream_output\": false, \"cleanup_on_exit\": true, \"polling_interval\": 1.0, \"reporting_interval\": \"transition\", \"monitor_class\": \"weft.core.resource_monitor.ResourceMonitor\", \"enable_process_title\": true, \"output_size_limit_mb\": 10, \"weft_context\": \"/Users/van/Developer/weft\", \"reserved_policy_on_stop\": \"keep\", \"reserved_policy_on_error\": \"keep\"}, \"io\": {\"inputs\": {\"inbox\": \"T1761500636586467328.inbox\"}, \"outputs\": {\"outbox\": \"T1761500636586467328.outbox\"}, \"control\": {\"ctrl_in\": \"T1761500636586467328.ctrl_in\", \"ctrl_out\": \"T1761500636586467328.ctrl_out\"}}, \"state\": {\"status\": \"completed\", \"return_code\": 0, \"started_at\": 1761500637113389000, \"completed_at\": 1761500637281818000, \"pid\": 80632, \"error\": null, \"time\": null, \"memory\": null, \"cpu\": null, \"fds\": null, \"net_connections\": null, \"max_memory\": null, \"max_cpu\": null, \"max_fds\": null, \"max_net_connections\": null}, \"metadata\": {\"source\": \"weft.cli\", \"parent_tid\": \"1761500636606930944\"}}, \"message_id\": 1761500636900245504, \"result_bytes\": 107, \"metrics\": null}"}
{"type": "message", "queue": "weft.tasks.log", "timestamp": 1761500657527312384, "body": "{\"event\": \"task_spawned\", \"tid\": \"1761500636606930944\", \"tid_short\": \"6606930944\", \"status\": \"created\", \"timestamp\": 1761500657526272000, \"taskspec\": {\"tid\": \"1761500636606930944\", \"version\": \"1.0\", \"name\": \"manager\", \"description\": null, \"spec\": {\"type\": \"function\", \"function_target\": \"weft.core.manager:Manager\", \"process_target\": null, \"args\": [], \"keyword_args\": {}, \"timeout\": null, \"limits\": {\"memory_mb\": 1024, \"cpu_percent\": null, \"max_fds\": null, \"max_connections\": null}, \"env\": {}, \"working_dir\": null, \"interactive\": false, \"stream_output\": false, \"cleanup_on_exit\": true, \"polling_interval\": 1.0, \"reporting_interval\": \"transition\", \"monitor_class\": \"weft.core.resource_monitor.ResourceMonitor\", \"enable_process_title\": true, \"output_size_limit_mb\": 10, \"weft_context\": \"/Users/van/Developer/weft\", \"reserved_policy_on_stop\": \"keep\", \"reserved_policy_on_error\": \"keep\"}, \"io\": {\"inputs\": {\"inbox\": \"weft.spawn.requests\"}, \"outputs\": {\"outbox\": \"weft.manager.outbox\"}, \"control\": {\"ctrl_in\": \"weft.manager.ctrl_in\", \"ctrl_out\": \"weft.manager.ctrl_out\"}}, \"state\": {\"status\": \"created\", \"return_code\": null, \"started_at\": null, \"completed_at\": null, \"pid\": null, \"error\": null, \"time\": null, \"memory\": null, \"cpu\": null, \"fds\": null, \"net_connections\": null, \"max_memory\": null, \"max_cpu\": null, \"max_fds\": null, \"max_net_connections\": null}, \"metadata\": {\"role\": \"manager\", \"capabilities\": [], \"idle_timeout\": 600.0}}, \"child_tid\": \"1761500657445007360\", \"child_taskspec\": {\"tid\": \"1761500657445007360\", \"version\": \"1.0\", \"name\": \"ls\", \"description\": null, \"spec\": {\"type\": \"command\", \"function_target\": null, \"process_target\": [\"ls\"], \"args\": [], \"keyword_args\": {}, \"timeout\": null, \"limits\": {\"memory_mb\": 1024, \"cpu_percent\": null, \"max_fds\": null, \"max_connections\": null}, \"env\": {}, \"working_dir\": null, \"interactive\": false, \"stream_output\": false, \"cleanup_on_exit\": true, \"polling_interval\": 1.0, \"reporting_interval\": \"transition\", \"monitor_class\": \"weft.core.resource_monitor.ResourceMonitor\", \"enable_process_title\": true, \"output_size_limit_mb\": 10, \"weft_context\": \"/Users/van/Developer/weft\", \"reserved_policy_on_stop\": \"keep\", \"reserved_policy_on_error\": \"keep\"}, \"io\": {\"inputs\": {\"inbox\": \"T1761500657445007360.inbox\"}, \"outputs\": {\"outbox\": \"T1761500657445007360.outbox\"}, \"control\": {\"ctrl_in\": \"T1761500657445007360.ctrl_in\", \"ctrl_out\": \"T1761500657445007360.ctrl_out\"}}, \"state\": {\"status\": \"created\", \"return_code\": null, \"started_at\": null, \"completed_at\": null, \"pid\": null, \"error\": null, \"time\": null, \"memory\": null, \"cpu\": null, \"fds\": null, \"net_connections\": null, \"max_memory\": null, \"max_cpu\": null, \"max_fds\": null, \"max_net_connections\": null}, \"metadata\": {\"source\": \"weft.cli\", \"parent_tid\": \"1761500636606930944\"}}}"}
{"type": "message", "queue": "weft.tasks.log", "timestamp": 1761500657712291840, "body": "{\"event\": \"task_initialized\", \"tid\": \"1761500657445007360\", \"tid_short\": \"7445007360\", \"status\": \"created\", \"timestamp\": 1761500657711128000, \"taskspec\": {\"tid\": \"1761500657445007360\", \"version\": \"1.0\", \"name\": \"ls\", \"description\": null, \"spec\": {\"type\": \"command\", \"function_target\": null, \"process_target\": [\"ls\"], \"args\": [], \"keyword_args\": {}, \"timeout\": null, \"limits\": {\"memory_mb\": 1024, \"cpu_percent\": null, \"max_fds\": null, \"max_connections\": null}, \"env\": {}, \"working_dir\": null, \"interactive\": false, \"stream_output\": false, \"cleanup_on_exit\": true, \"polling_interval\": 1.0, \"reporting_interval\": \"transition\", \"monitor_class\": \"weft.core.resource_monitor.ResourceMonitor\", \"enable_process_title\": true, \"output_size_limit_mb\": 10, \"weft_context\": \"/Users/van/Developer/weft\", \"reserved_policy_on_stop\": \"keep\", \"reserved_policy_on_error\": \"keep\"}, \"io\": {\"inputs\": {\"inbox\": \"T1761500657445007360.inbox\"}, \"outputs\": {\"outbox\": \"T1761500657445007360.outbox\"}, \"control\": {\"ctrl_in\": \"T1761500657445007360.ctrl_in\", \"ctrl_out\": \"T1761500657445007360.ctrl_out\"}}, \"state\": {\"status\": \"created\", \"return_code\": null, \"started_at\": null, \"completed_at\": null, \"pid\": null, \"error\": null, \"time\": null, \"memory\": null, \"cpu\": null, \"fds\": null, \"net_connections\": null, \"max_memory\": null, \"max_cpu\": null, \"max_fds\": null, \"max_net_connections\": null}, \"metadata\": {\"source\": \"weft.cli\", \"parent_tid\": \"1761500636606930944\"}}}"}
{"type": "message", "queue": "weft.tasks.log", "timestamp": 1761500657716453376, "body": "{\"event\": \"work_started\", \"tid\": \"1761500657445007360\", \"tid_short\": \"7445007360\", \"status\": \"running\", \"timestamp\": 1761500657716423000, \"taskspec\": {\"tid\": \"1761500657445007360\", \"version\": \"1.0\", \"name\": \"ls\", \"description\": null, \"spec\": {\"type\": \"command\", \"function_target\": null, \"process_target\": [\"ls\"], \"args\": [], \"keyword_args\": {}, \"timeout\": null, \"limits\": {\"memory_mb\": 1024, \"cpu_percent\": null, \"max_fds\": null, \"max_connections\": null}, \"env\": {}, \"working_dir\": null, \"interactive\": false, \"stream_output\": false, \"cleanup_on_exit\": true, \"polling_interval\": 1.0, \"reporting_interval\": \"transition\", \"monitor_class\": \"weft.core.resource_monitor.ResourceMonitor\", \"enable_process_title\": true, \"output_size_limit_mb\": 10, \"weft_context\": \"/Users/van/Developer/weft\", \"reserved_policy_on_stop\": \"keep\", \"reserved_policy_on_error\": \"keep\"}, \"io\": {\"inputs\": {\"inbox\": \"T1761500657445007360.inbox\"}, \"outputs\": {\"outbox\": \"T1761500657445007360.outbox\"}, \"control\": {\"ctrl_in\": \"T1761500657445007360.ctrl_in\", \"ctrl_out\": \"T1761500657445007360.ctrl_out\"}}, \"state\": {\"status\": \"running\", \"return_code\": null, \"started_at\": 1761500657715157000, \"completed_at\": null, \"pid\": 80712, \"error\": null, \"time\": null, \"memory\": null, \"cpu\": null, \"fds\": null, \"net_connections\": null, \"max_memory\": null, \"max_cpu\": null, \"max_fds\": null, \"max_net_connections\": null}, \"metadata\": {\"source\": \"weft.cli\", \"parent_tid\": \"1761500636606930944\"}}, \"message_id\": 1761500657498664960}"}
{"type": "message", "queue": "weft.tasks.log", "timestamp": 1761500658035826688, "body": "{\"event\": \"work_completed\", \"tid\": \"1761500657445007360\", \"tid_short\": \"7445007360\", \"status\": \"completed\", \"timestamp\": 1761500658035771000, \"taskspec\": {\"tid\": \"1761500657445007360\", \"version\": \"1.0\", \"name\": \"ls\", \"description\": null, \"spec\": {\"type\": \"command\", \"function_target\": null, \"process_target\": [\"ls\"], \"args\": [], \"keyword_args\": {}, \"timeout\": null, \"limits\": {\"memory_mb\": 1024, \"cpu_percent\": null, \"max_fds\": null, \"max_connections\": null}, \"env\": {}, \"working_dir\": null, \"interactive\": false, \"stream_output\": false, \"cleanup_on_exit\": true, \"polling_interval\": 1.0, \"reporting_interval\": \"transition\", \"monitor_class\": \"weft.core.resource_monitor.ResourceMonitor\", \"enable_process_title\": true, \"output_size_limit_mb\": 10, \"weft_context\": \"/Users/van/Developer/weft\", \"reserved_policy_on_stop\": \"keep\", \"reserved_policy_on_error\": \"keep\"}, \"io\": {\"inputs\": {\"inbox\": \"T1761500657445007360.inbox\"}, \"outputs\": {\"outbox\": \"T1761500657445007360.outbox\"}, \"control\": {\"ctrl_in\": \"T1761500657445007360.ctrl_in\", \"ctrl_out\": \"T1761500657445007360.ctrl_out\"}}, \"state\": {\"status\": \"completed\", \"return_code\": 0, \"started_at\": 1761500657715157000, \"completed_at\": 1761500658035718000, \"pid\": 80712, \"error\": null, \"time\": null, \"memory\": null, \"cpu\": null, \"fds\": null, \"net_connections\": null, \"max_memory\": null, \"max_cpu\": null, \"max_fds\": null, \"max_net_connections\": null}, \"metadata\": {\"source\": \"weft.cli\", \"parent_tid\": \"1761500636606930944\"}}, \"message_id\": 1761500657498664960, \"result_bytes\": 107, \"metrics\": null}"}
{"type": "message", "queue": "weft.tasks.log", "timestamp": 1761500663669100544, "body": "{\"event\": \"task_spawned\", \"tid\": \"1761500636606930944\", \"tid_short\": \"6606930944\", \"status\": \"created\", \"timestamp\": 1761500663668839000, \"taskspec\": {\"tid\": \"1761500636606930944\", \"version\": \"1.0\", \"name\": \"manager\", \"description\": null, \"spec\": {\"type\": \"function\", \"function_target\": \"weft.core.manager:Manager\", \"process_target\": null, \"args\": [], \"keyword_args\": {}, \"timeout\": null, \"limits\": {\"memory_mb\": 1024, \"cpu_percent\": null, \"max_fds\": null, \"max_connections\": null}, \"env\": {}, \"working_dir\": null, \"interactive\": false, \"stream_output\": false, \"cleanup_on_exit\": true, \"polling_interval\": 1.0, \"reporting_interval\": \"transition\", \"monitor_class\": \"weft.core.resource_monitor.ResourceMonitor\", \"enable_process_title\": true, \"output_size_limit_mb\": 10, \"weft_context\": \"/Users/van/Developer/weft\", \"reserved_policy_on_stop\": \"keep\", \"reserved_policy_on_error\": \"keep\"}, \"io\": {\"inputs\": {\"inbox\": \"weft.spawn.requests\"}, \"outputs\": {\"outbox\": \"weft.manager.outbox\"}, \"control\": {\"ctrl_in\": \"weft.manager.ctrl_in\", \"ctrl_out\": \"weft.manager.ctrl_out\"}}, \"state\": {\"status\": \"created\", \"return_code\": null, \"started_at\": null, \"completed_at\": null, \"pid\": null, \"error\": null, \"time\": null, \"memory\": null, \"cpu\": null, \"fds\": null, \"net_connections\": null, \"max_memory\": null, \"max_cpu\": null, \"max_fds\": null, \"max_net_connections\": null}, \"metadata\": {\"role\": \"manager\", \"capabilities\": [], \"idle_timeout\": 600.0}}, \"child_tid\": \"1761500663592058880\", \"child_taskspec\": {\"tid\": \"1761500663592058880\", \"version\": \"1.0\", \"name\": \"python\", \"description\": null, \"spec\": {\"type\": \"command\", \"function_target\": null, \"process_target\": [\"python\"], \"args\": [], \"keyword_args\": {}, \"timeout\": null, \"limits\": {\"memory_mb\": 1024, \"cpu_percent\": null, \"max_fds\": null, \"max_connections\": null}, \"env\": {}, \"working_dir\": null, \"interactive\": true, \"stream_output\": true, \"cleanup_on_exit\": true, \"polling_interval\": 1.0, \"reporting_interval\": \"transition\", \"monitor_class\": \"weft.core.resource_monitor.ResourceMonitor\", \"enable_process_title\": true, \"output_size_limit_mb\": 10, \"weft_context\": \"/Users/van/Developer/weft\", \"reserved_policy_on_stop\": \"keep\", \"reserved_policy_on_error\": \"keep\"}, \"io\": {\"inputs\": {\"inbox\": \"T1761500663592058880.inbox\"}, \"outputs\": {\"outbox\": \"T1761500663592058880.outbox\"}, \"control\": {\"ctrl_in\": \"T1761500663592058880.ctrl_in\", \"ctrl_out\": \"T1761500663592058880.ctrl_out\"}}, \"state\": {\"status\": \"created\", \"return_code\": null, \"started_at\": null, \"completed_at\": null, \"pid\": null, \"error\": null, \"time\": null, \"memory\": null, \"cpu\": null, \"fds\": null, \"net_connections\": null, \"max_memory\": null, \"max_cpu\": null, \"max_fds\": null, \"max_net_connections\": null}, \"metadata\": {\"source\": \"weft.cli\", \"parent_tid\": \"1761500636606930944\"}}}"}
{"type": "message", "queue": "weft.tasks.log", "timestamp": 1761500663920230400, "body": "{\"event\": \"task_initialized\", \"tid\": \"1761500663592058880\", \"tid_short\": \"3592058880\", \"status\": \"created\", \"timestamp\": 1761500663918521000, \"taskspec\": {\"tid\": \"1761500663592058880\", \"version\": \"1.0\", \"name\": \"python\", \"description\": null, \"spec\": {\"type\": \"command\", \"function_target\": null, \"process_target\": [\"python\"], \"args\": [], \"keyword_args\": {}, \"timeout\": null, \"limits\": {\"memory_mb\": 1024, \"cpu_percent\": null, \"max_fds\": null, \"max_connections\": null}, \"env\": {}, \"working_dir\": null, \"interactive\": true, \"stream_output\": true, \"cleanup_on_exit\": true, \"polling_interval\": 1.0, \"reporting_interval\": \"transition\", \"monitor_class\": \"weft.core.resource_monitor.ResourceMonitor\", \"enable_process_title\": true, \"output_size_limit_mb\": 10, \"weft_context\": \"/Users/van/Developer/weft\", \"reserved_policy_on_stop\": \"keep\", \"reserved_policy_on_error\": \"keep\"}, \"io\": {\"inputs\": {\"inbox\": \"T1761500663592058880.inbox\"}, \"outputs\": {\"outbox\": \"T1761500663592058880.outbox\"}, \"control\": {\"ctrl_in\": \"T1761500663592058880.ctrl_in\", \"ctrl_out\": \"T1761500663592058880.ctrl_out\"}}, \"state\": {\"status\": \"created\", \"return_code\": null, \"started_at\": null, \"completed_at\": null, \"pid\": null, \"error\": null, \"time\": null, \"memory\": null, \"cpu\": null, \"fds\": null, \"net_connections\": null, \"max_memory\": null, \"max_cpu\": null, \"max_fds\": null, \"max_net_connections\": null}, \"metadata\": {\"source\": \"weft.cli\", \"parent_tid\": \"1761500636606930944\"}}}"}
{"type": "message", "queue": "weft.tasks.log", "timestamp": 1761500663929602048, "body": "{\"event\": \"work_started\", \"tid\": \"1761500663592058880\", \"tid_short\": \"3592058880\", \"status\": \"running\", \"timestamp\": 1761500663929517000, \"taskspec\": {\"tid\": \"1761500663592058880\", \"version\": \"1.0\", \"name\": \"python\", \"description\": null, \"spec\": {\"type\": \"command\", \"function_target\": null, \"process_target\": [\"python\"], \"args\": [], \"keyword_args\": {}, \"timeout\": null, \"limits\": {\"memory_mb\": 1024, \"cpu_percent\": null, \"max_fds\": null, \"max_connections\": null}, \"env\": {}, \"working_dir\": null, \"interactive\": true, \"stream_output\": true, \"cleanup_on_exit\": true, \"polling_interval\": 1.0, \"reporting_interval\": \"transition\", \"monitor_class\": \"weft.core.resource_monitor.ResourceMonitor\", \"enable_process_title\": true, \"output_size_limit_mb\": 10, \"weft_context\": \"/Users/van/Developer/weft\", \"reserved_policy_on_stop\": \"keep\", \"reserved_policy_on_error\": \"keep\"}, \"io\": {\"inputs\": {\"inbox\": \"T1761500663592058880.inbox\"}, \"outputs\": {\"outbox\": \"T1761500663592058880.outbox\"}, \"control\": {\"ctrl_in\": \"T1761500663592058880.ctrl_in\", \"ctrl_out\": \"T1761500663592058880.ctrl_out\"}}, \"state\": {\"status\": \"running\", \"return_code\": null, \"started_at\": 1761500663928732000, \"completed_at\": null, \"pid\": 80748, \"error\": null, \"time\": null, \"memory\": null, \"cpu\": null, \"fds\": null, \"net_connections\": null, \"max_memory\": null, \"max_cpu\": null, \"max_fds\": null, \"max_net_connections\": null}, \"metadata\": {\"source\": \"weft.cli\", \"parent_tid\": \"1761500636606930944\"}}, \"message_id\": 1761500663653707776}"}
{"type": "message", "queue": "weft.tasks.log", "timestamp": 1761500673872736256, "body": "{\"event\": \"work_completed\", \"tid\": \"1761500663592058880\", \"tid_short\": \"3592058880\", \"status\": \"completed\", \"timestamp\": 1761500673872444000, \"taskspec\": {\"tid\": \"1761500663592058880\", \"version\": \"1.0\", \"name\": \"python\", \"description\": null, \"spec\": {\"type\": \"command\", \"function_target\": null, \"process_target\": [\"python\"], \"args\": [], \"keyword_args\": {}, \"timeout\": null, \"limits\": {\"memory_mb\": 1024, \"cpu_percent\": null, \"max_fds\": null, \"max_connections\": null}, \"env\": {}, \"working_dir\": null, \"interactive\": true, \"stream_output\": true, \"cleanup_on_exit\": true, \"polling_interval\": 1.0, \"reporting_interval\": \"transition\", \"monitor_class\": \"weft.core.resource_monitor.ResourceMonitor\", \"enable_process_title\": true, \"output_size_limit_mb\": 10, \"weft_context\": \"/Users/van/Developer/weft\", \"reserved_policy_on_stop\": \"keep\", \"reserved_policy_on_error\": \"keep\"}, \"io\": {\"inputs\": {\"inbox\": \"T1761500663592058880.inbox\"}, \"outputs\": {\"outbox\": \"T1761500663592058880.outbox\"}, \"control\": {\"ctrl_in\": \"T1761500663592058880.ctrl_in\", \"ctrl_out\": \"T1761500663592058880.ctrl_out\"}}, \"state\": {\"status\": \"completed\", \"return_code\": 0, \"started_at\": 1761500663928732000, \"completed_at\": 1761500673872015000, \"pid\": 80748, \"error\": null, \"time\": null, \"memory\": 9.25, \"cpu\": 32, \"fds\": 3, \"net_connections\": 0, \"max_memory\": 14.03125, \"max_cpu\": 71, \"max_fds\": 3, \"max_net_connections\": 0}, \"metadata\": {\"source\": \"weft.cli\", \"parent_tid\": \"1761500636606930944\"}}, \"message_id\": 1761500673872020000, \"result_bytes\": 0}"}
{"type": "message", "queue": "weft.tasks.log", "timestamp": 1761501273963421696, "body": "{\"event\": \"manager_idle_shutdown\", \"tid\": \"1761500636606930944\", \"tid_short\": \"6606930944\", \"status\": \"completed\", \"timestamp\": 1761501273963108000, \"taskspec\": {\"tid\": \"1761500636606930944\", \"version\": \"1.0\", \"name\": \"manager\", \"description\": null, \"spec\": {\"type\": \"function\", \"function_target\": \"weft.core.manager:Manager\", \"process_target\": null, \"args\": [], \"keyword_args\": {}, \"timeout\": null, \"limits\": {\"memory_mb\": 1024, \"cpu_percent\": null, \"max_fds\": null, \"max_connections\": null}, \"env\": {}, \"working_dir\": null, \"interactive\": false, \"stream_output\": false, \"cleanup_on_exit\": true, \"polling_interval\": 1.0, \"reporting_interval\": \"transition\", \"monitor_class\": \"weft.core.resource_monitor.ResourceMonitor\", \"enable_process_title\": true, \"output_size_limit_mb\": 10, \"weft_context\": \"/Users/van/Developer/weft\", \"reserved_policy_on_stop\": \"keep\", \"reserved_policy_on_error\": \"keep\"}, \"io\": {\"inputs\": {\"inbox\": \"weft.spawn.requests\"}, \"outputs\": {\"outbox\": \"weft.manager.outbox\"}, \"control\": {\"ctrl_in\": \"weft.manager.ctrl_in\", \"ctrl_out\": \"weft.manager.ctrl_out\"}}, \"state\": {\"status\": \"completed\", \"return_code\": 0, \"started_at\": null, \"completed_at\": 1761501273962700000, \"pid\": null, \"error\": null, \"time\": null, \"memory\": null, \"cpu\": null, \"fds\": null, \"net_connections\": null, \"max_memory\": null, \"max_cpu\": null, \"max_fds\": null, \"max_net_connections\": null}, \"metadata\": {\"role\": \"manager\", \"capabilities\": [], \"idle_timeout\": 600.0}}}"}
{"type": "message", "queue": "weft.tid.mappings", "timestamp": 1761500636791660544, "body": "{\"short\": \"6606930944\", \"full\": \"1761500636606930944\", \"pid\": 80627, \"name\": \"manager\", \"started\": 1761500636790833000, \"hostname\": \"airbook\"}"}
{"type": "message", "queue": "weft.tid.mappings", "timestamp": 1761500637108936704, "body": "{\"short\": \"6586467328\", \"full\": \"1761500636586467328\", \"pid\": 80632, \"name\": \"ls\", \"started\": 1761500637108153000, \"hostname\": \"airbook\"}"}
{"type": "message", "queue": "weft.tid.mappings", "timestamp": 1761500657709301760, "body": "{\"short\": \"7445007360\", \"full\": \"1761500657445007360\", \"pid\": 80712, \"name\": \"ls\", \"started\": 1761500657708485000, \"hostname\": \"airbook\"}"}
{"type": "message", "queue": "weft.tid.mappings", "timestamp": 1761500663917391872, "body": "{\"short\": \"3592058880\", \"full\": \"1761500663592058880\", \"pid\": 80744, \"name\": \"python\", \"started\": 1761500663916598000, \"hostname\": \"airbook\"}"}
{"type": "message", "queue": "weft.workers.registry", "timestamp": 1761485118122110976, "body": "{\"tid\": \"1761446625527701504\", \"name\": \"manager\", \"capabilities\": [], \"status\": \"stopped\", \"pid\": 48110, \"timestamp\": 1761485118121562112, \"inbox\": \"weft.spawn.requests\", \"requests\": \"weft.spawn.requests\", \"ctrl_in\": \"weft.manager.ctrl_in\", \"ctrl_out\": \"weft.manager.ctrl_out\", \"outbox\": \"weft.manager.outbox\", \"role\": \"manager\"}"}
{"type": "message", "queue": "weft.workers.registry", "timestamp": 1761500636794847232, "body": "{\"tid\": \"1761500636606930944\", \"name\": \"manager\", \"capabilities\": [], \"status\": \"active\", \"pid\": 80627, \"timestamp\": 1761500636794523648, \"inbox\": \"weft.spawn.requests\", \"requests\": \"weft.spawn.requests\", \"ctrl_in\": \"weft.manager.ctrl_in\", \"ctrl_out\": \"weft.manager.ctrl_out\", \"outbox\": \"weft.manager.outbox\", \"role\": \"manager\"}"}
{"type": "message", "queue": "weft.workers.registry", "timestamp": 1761501273966444544, "body": "{\"tid\": \"1761500636606930944\", \"name\": \"manager\", \"capabilities\": [], \"status\": \"stopped\", \"pid\": 80627, \"timestamp\": 1761501273966010368, \"inbox\": \"weft.spawn.requests\", \"requests\": \"weft.spawn.requests\", \"ctrl_in\": \"weft.manager.ctrl_in\", \"ctrl_out\": \"weft.manager.ctrl_out\", \"outbox\": \"weft.manager.outbox\", \"role\": \"manager\"}"}
